<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Dev Requests - MEMO TRACK</title>
  <link rel="stylesheet" href="/stylesheets/index.css">
</head>
<body>
  <div style="max-width:900px;margin:2rem auto;padding:1rem;background:#fff;">
    <h2>Dev users and requests</h2>
    <p>This page is for development only. You can set a password for any dev user so you can sign in as them.</p>
    <table style="width:100%;border-collapse:collapse;">
      <thead>
        <tr>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #ddd;">ID</th>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #ddd;">Username</th>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #ddd;">Email</th>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #ddd;">Type</th>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #ddd;">Connection Requests</th>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #ddd;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% users.forEach(u => { %>
          <tr>
            <td style="padding:8px;border-bottom:1px solid #eee;"><%= u.id %></td>
            <td style="padding:8px;border-bottom:1px solid #eee;"><%= u.username %></td>
            <td style="padding:8px;border-bottom:1px solid #eee;"><%= u.email %></td>
            <td style="padding:8px;border-bottom:1px solid #eee;"><%= u.userType %></td>
            <td style="padding:8px;border-bottom:1px solid #eee;">
              <%= (u.connectionRequests || []).join(', ') %>
            </td>
            <td style="padding:8px;border-bottom:1px solid #eee;">
              <form action="/dev-set-password" method="post" style="display:inline-block;margin-right:8px;">
                <input type="hidden" name="userId" value="<%= u.id %>">
                <input type="password" name="password" placeholder="new password" required style="padding:6px;margin-right:6px;">
                <button type="submit" class="btn btn-sm btn-primary">Set Password</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</body>
</html>